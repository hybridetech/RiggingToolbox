
require RiggingToolbox;

operator entry(){
   	
  StartFabricProfiling();

   	GeometryStack stack();

  	FilePath path("${FABRIC_RIGGINGTOOLBOX_PATH}/Tests/GeometryStack/cubeTest.abc");
    AlembicGeometryGenerator alembicGenerator(path);
   	SkinningDeformer skiningDeformer();
   	stack.addGeometryOperator(alembicGenerator);
   	stack.addGeometryOperator(skiningDeformer);

    EvalContext context();
    GeometrySet geomSet = stack.evaluate(context);

    // Modify the pose and then reevaluate. 
    Mat44 pose[];
    pose.resize(2);
    pose[0] = Xfo(Vec3(3, 4, 5)).toMat44();
    pose[1] = Xfo(Vec3(10, 20, 5)).toMat44();
	skiningDeformer.setPose(pose);

	stack.evaluate(context);

  StopFabricProfiling();

  report( GetEvalPathReport() );
}

